{"ast":null,"code":"import _objectWithoutProperties from \"/Users/paulbriar/Desktop/Coding/React/Twitta/Twitta-Front/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport apiCall from '../../services/api';\nimport { SET_CURRENT_USER } from '../actionTypes';\nexport var setCurrentUser = function setCurrentUser(user) {\n  return {\n    type: SET_CURRENT_USER,\n    user: user\n  };\n};\nexport var authUser = function authUser(type, userData) {\n  return function (dispatch) {\n    return new Promise(function (resolve, reject) {\n      return apiCall(\"post\", \"/api/auth/\".concat(type), userData).then(function (_ref) {\n        var token = _ref.token,\n            user = _objectWithoutProperties(_ref, [\"token\"]);\n\n        localStorage.setItem(\"jwtToken\", token);\n        dispatch(setCurrentUser(user));\n        resolve();\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/Users/paulbriar/Desktop/Coding/React/Twitta/Twitta-Front/src/store/actions/auth.js"],"names":["apiCall","SET_CURRENT_USER","setCurrentUser","user","type","authUser","userData","dispatch","Promise","resolve","reject","then","token","localStorage","setItem"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,IAAI,EAAI;AACpC,SAAO;AACLC,IAAAA,IAAI,EAAEH,gBADD;AAELE,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAACD,IAAD,EAAOE,QAAP,EAAoB;AAC1C,SAAO,UAAAC,QAAQ,EAAI;AACjB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,aAAOV,OAAO,CAAC,MAAD,sBAAsBI,IAAtB,GAA8BE,QAA9B,CAAP,CACJK,IADI,CACE,gBAAsB;AAAA,YAApBC,KAAoB,QAApBA,KAAoB;AAAA,YAAVT,IAAU;;AAC3BU,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,KAAjC;AACAL,QAAAA,QAAQ,CAACL,cAAc,CAACC,IAAD,CAAf,CAAR;AACAM,QAAAA,OAAO;AACR,OALI,CAAP;AAMD,KAPM,CAAP;AAQD,GATD;AAUD,CAXM","sourcesContent":["import apiCall from '../../services/api';\nimport { SET_CURRENT_USER } from '../actionTypes';\n\nexport const setCurrentUser = user => {\n  return {\n    type: SET_CURRENT_USER,\n    user\n  };\n}\n\nexport const authUser = (type, userData) => {\n  return dispatch => {\n    return new Promise((resolve, reject) => {\n      return apiCall(\"post\", `/api/auth/${type}`, userData)\n        .then( ({token, ...user}) => {\n          localStorage.setItem(\"jwtToken\", token);\n          dispatch(setCurrentUser(user));\n          resolve();\n        })\n    })\n  }\n}"]},"metadata":{},"sourceType":"module"}